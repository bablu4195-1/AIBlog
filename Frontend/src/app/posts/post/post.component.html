<h1>Hello Posts</h1>
<div *ngIf="addButton">
    <button (click)="addPost()">Add Posts</button>
</div>

<div *ngIf="postsForm">
<form [formGroup]="postForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="title">Title</label>
      <input id="title" type="text" formControlName="title">
      <div *ngIf="postForm.get('title')?.invalid">{{ getErrorMessage('title') }}</div>
    </div>
    
    <div>
        <label for="content">Content</label>
        <textarea id="content" formControlName="content"></textarea>
        <div *ngIf="postForm.get('content')?.invalid">{{ getErrorMessage('title') }}</div>
    </div>

    <!-- <div>
        <label for="content">Comments</label>
        <textarea id="content" formControlName="content"></textarea>
        <div *ngIf="postForm.get('comments')?.invalid">{{ getErrorMessage('comments') }}</div>
    </div> -->
  
    <div formArrayName="tags">
      <div *ngFor="let tag of tags.controls; index as i">
        <label for="tag-{{i}}">Tag {{i + 1}}</label>
        <input id="tag-{{i}}" type="text" [formControlName]="i">
        <button type="button" (click)="removeTag(i)">Remove</button>
      </div>
      <button type="button" (click)="addTag()">Add Tag</button>
    </div>
  
    <button type="submit">Submit</button>
  </form>
</div>  

<div>
    <div class="post-card" *ngFor="let post of posts;let index = index">
        <h2>{{ post.title }}</h2>
        <p>{{ post.content }}</p>
        <p><strong>Author:</strong> {{ post.username}}</p>
        <!-- <p><strong>Comments:</strong> {{ post.comments }}</p> -->
        <p><strong>Date:</strong> {{ post.date | date }}</p>
        <p *ngIf="post.tags.length == 1"><strong>Tags:</strong> {{ post.tags }}</p>
        <p *ngIf="post.tags.length > 1"><strong>Tags:</strong> {{ post.tags.join(', ') }}</p>
        <p><strong>Views:</strong> {{ post.views }}</p>
      </div>
      <app-crypto></app-crypto>
</div>
